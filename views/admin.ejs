<%- include('partials/header') %>

<main class="container" style="margin-top: 40px;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h1 class="page-title">Admin Dashboard</h1>
        <a href="/add-event" style="background-color: #28a745; color: white; padding: 10px 20px; text-decoration: none; border-radius: 4px;">+ Add New Event</a>
    </div>

    <table style="width: 100%; border-collapse: collapse; background: #222; color: white; border-radius: 8px; overflow: hidden;">
        <thead>
            <tr style="background-color: #9d1a33; text-align: left;">
                <th style="padding: 15px;">Title</th>
                <th style="padding: 15px;">Category</th>
                <th style="padding: 15px;">Date / Location</th>
                <th style="padding: 15px;">Actions</th>
            </tr>
        </thead>
        <tbody>
            <% if (events.length > 0) { %>
                <% events.forEach(event => { %>
                    <tr style="border-bottom: 1px solid #444;">
                        <td style="padding: 15px;"><%= event.title %></td>
                        <td style="padding: 15px; text-transform: capitalize;"><%= event.category %></td>
                        <td style="padding: 15px;">
                            <%= event.date ? event.date : event.location %>
                        </td>
                        <td style="padding: 15px; display: flex; gap: 10px;">
                            <a href="/edit-event/<%= event._id %>" style="background-color: #007bff; color: white; padding: 8px 12px; text-decoration: none; border-radius: 4px; font-size: 14px;">
                                Edit
                            </a>

                            <form action="/delete-event" method="POST" onsubmit="return confirm('Are you sure?');">
                                <input type="hidden" name="id" value="<%= event._id %>">
                                     <button type="submit" style="background-color: #dc3545; color: white; border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer;">
                                        Delete
                                    </button>
                            </form>
                        </td>
                    </tr>
                <% }) %>
            <% } else { %>
                <tr>
                    <td colspan="4" style="padding: 20px; text-align: center;">No events found in database.</td>
                </tr>
            <% } %>
        </tbody>
    </table>
</main>

<%- include('partials/footer') %>